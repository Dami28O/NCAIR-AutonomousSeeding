<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Control Test</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
</head>
<body>
    <h1>√Ägb·∫πÃÄ Control Centre</h1>
    
    <div class="instructions">
        <strong>Setup Instructions:</strong><br>
        1. Connect to WiFi network: <strong>EGBA</strong><br>
        2. Password: <strong>EGBA@Seeding</strong><br>
        3. Robot should be at: <strong>http://192.168.4.1</strong>
    </div>
    
    <div class="status">
        <h3>
            <span class="connection-indicator" id="connectionStatus"></span>
            Connection Status
        </h3>
        <p id="statusMessage">Click a button to test connection...</p>
        <p><strong>Robot IP:</strong> 
            <input type="text" id="robotIP" value="192.168.4.1" 
                   style="padding: 5px; border-radius: 5px; border: 1px solid #ddd;">
        </p>
    </div>
    <div class="gps-status">
        <h3>GPS Coordinates:</h3>
        <div id="map"></div>
        <p id="coords">Fetching...</p>
    </div>
    <div class="controls-container">
        <div class="variableinputs">
            <label for="speedSlider"><strong>Speed:</strong> <span id="speedValue">50%</span></label>
            <input type="range" id="speedSlider" min="0" max="100" value="50" step="1">

            <label for="radiusInput"><strong>Turning Radius (cm):</strong></label>
            <input type="number" id="radiusInput" min="0" max="1000" value="37.5">

            <label for="depthInput"><strong>Furrow Depth (cm):</strong></label>
            <input type="number" id="depthInput" min="0" max="10" value="3.0">
        </div>
        <div class="button-grid">
            <button class="forward" onclick="sendCommand('forward')">‚¨ÜÔ∏è<br>FORWARD</button>
            <button class="left" onclick="sendCommand('left')">‚¨ÖÔ∏è<br>LEFT</button>
            <button class="stop" onclick="sendCommand('stop')">‚èπÔ∏è<br>STOP</button>
            <button class="right" onclick="sendCommand('right')">‚û°Ô∏è<br>RIGHT</button>
            <button class="backward" onclick="sendCommand('backward')">‚¨áÔ∏è<br>BACK</button>
        </div>
        <div class="furrow-grid">
            <button class="furrow-up" onclick="sendCommand('furrow_up')">üîº<br>FURROW UP</button>
            <button class="furrow-down" onclick="sendCommand('furrow_down')">üîΩ<br>FURROW DOWN</button>
            <button id="plantToggle" class="plant-toggle paused" onclick="togglePlantMode()">üå±<br>PLANT</button>
        </div>
        
    </div>

    
    <div class="log" id="commandLog">
        <strong>Command Log:</strong><br>
        Ready to send commands...<br>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
    <script src="main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <script src="kalman.js"></script>
</body>
</html>